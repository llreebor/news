<!-- [START] HTML Input -->
<!-- Input group wrapper (use .error or .success class for validation errors) -->
<div class="input-group group error">
	<!-- Label  -->
	<label for="password" class="input-label">Password</label>

	<!-- Input field & Icon -->
	<div class="relative">
		<!-- Input -->
		<input
			id="input"
			name="input"
			type="password"
			placeholder="Some placeholder..."
			class="input-field password-input"
		/>

		<!-- Pswd Icons -->
		<button
			class="toggle-password-btn absolute top-1/2 right-3 h-[18px] w-[18px] -translate-y-1/2 cursor-pointer"
		>
			<img
				class="pswd-icon-hidden"
				src="./images/global/password-hidden.svg"
				alt="icon"
			/>
			<img
				class="pswd-icon-visible hidden"
				src="./images/global/password-visible.svg"
				alt="icon"
			/>
		</button>
	</div>

	<!-- Error message (only visible when .error is applied on parent group) -->
	<p class="input-error-message">Error message</p>
</div>
<!-- [END] HTML Input -->

<!-- [START] CSS Input -->
<style>
	/* Input */
	.input-group {
		@apply relative flex w-full flex-col;
	}
	.input-label {
		@apply text-primary group-[.error]:text-error group-[.success]:text-success mb-2 block text-sm font-medium;
	}
	.input-field {
		@apply group-[.error]:border-error group-[.success]:border-success hover:border-primary focus:border-primary w-full rounded border border-gray-200 px-3 py-2 text-sm transition outline-none disabled:cursor-not-allowed disabled:border-gray-200 disabled:bg-gray-100 disabled:text-gray-400;
	}
	.input-error-message {
		@apply mt-1 hidden text-xs text-red-600 group-[.error]:block;
	}
</style>
<!-- [END] CSS Input -->

<!-- [START] JavaScript Password Input  -->
<script>
	// Toggles the visibility of password input
	function togglePasswordVisibility() {
		// Select all password inputs and toggle buttons
		const passwordInputs = document.querySelectorAll(".password-input")
		const toggleButtons = document.querySelectorAll(".toggle-password-btn")

		// Validate that we have matching pairs of inputs and buttons
		if (passwordInputs.length === 0 || toggleButtons.length === 0) {
			console.warn("No password inputs or toggle buttons found.")
			return
		}

		if (passwordInputs.length !== toggleButtons.length) {
			console.warn(
				"Mismatch between number of password inputs and toggle buttons.",
			)
			return
		}

		// Iterate through each toggle button and attach event listener
		toggleButtons.forEach((toggleBtn, index) => {
			const passwordInput = passwordInputs[index]
			const iconVisible = toggleBtn.querySelector(".pswd-icon-visible")
			const iconHidden = toggleBtn.querySelector(".pswd-icon-hidden")

			// Validate icon elements exist
			if (!iconVisible || !iconHidden) {
				console.warn(`Missing visibility icons for password input ${index}.`)
				return
			}

			// Initialize icon states based on input type
			const isPassword = passwordInput.type === "password"
			iconVisible.style.display = isPassword ? "none" : "block"
			iconHidden.style.display = isPassword ? "block" : "none"

			// Add click event listener to toggle visibility
			toggleBtn.addEventListener("click", (e) => {
				e.preventDefault()

				// Toggle input type between password and text
				passwordInput.type =
					passwordInput.type === "password" ? "text" : "password"

				// Update icon visibility based on new input type
				const isPasswordNow = passwordInput.type === "password"
				iconVisible.style.display = isPasswordNow ? "none" : "block"
				iconHidden.style.display = isPasswordNow ? "block" : "none"
			})
		})
	}

	// Initialize the function when the DOM is fully loaded
	togglePasswordVisibility()
</script>
<!-- [END] JavaScript Password Input  -->
